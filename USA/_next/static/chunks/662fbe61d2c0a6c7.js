(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,168125,e=>{"use strict";var t=e.i(610409),a=e.i(310862);function r({address:e,data:r,signature:n}){return(0,a.concatHex)([(0,t.encodeAbiParameters)([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,r,n]),"0x6492649264926492649264926492649264926492649264926492649264926492"])}e.i(48534),e.i(414183),e.i(502908),e.i(128725);var n=e.i(215496);e.i(116624);var i=e.i(378223);e.i(448114);n.BaseError,n.BaseError,n.BaseError;var s=e.i(287734),o=n,c=e.i(809379);let d="0x6492649264926492649264926492649264926492649264926492649264926492";function b(e){if(i.slice(e,-32)!==d)throw new l(e)}function f(e){return"string"==typeof e?u(e):e}function u(e){b(e);let[t,a,r]=s.decode(s.from("address, bytes, bytes"),e);return{data:a,signature:c.fromHex(r),to:t}}function y(e){let{data:t,signature:a,to:r}=e;return i.concat(s.encode(s.from("address, bytes, bytes"),[r,t,c.toHex(a)]),d)}function p(e){try{return b(e),!0}catch{return!1}}class l extends o.BaseError{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WrappedSignature.InvalidWrappedSignatureError"})}}e.s(["InvalidWrappedSignatureError",()=>l,"assert",()=>b,"from",()=>f,"fromHex",()=>u,"magicBytes",0,d,"toHex",()=>y,"universalSignatureValidatorAbi",0,[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],"universalSignatureValidatorBytecode",0,"0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572","validate",()=>p],58156),e.i(58156),e.i(277096),e.i(392798);var m=e.i(257606);e.i(362729);let g=[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],v=[{type:"bytes4"}];async function h(e){return(0,m.readContract)({contract:e.contract,method:["0x1626ba7e",g,v],params:[e.hash,e.signature]})}e.i(664846),e.i(933086),e.i(247557);var w=e.i(16744),A=e.i(240703),x=e.i(966312);async function E({hash:e,signature:t,contract:a}){try{return await h({contract:a,hash:e,signature:t})==="0x1626ba7e"}catch(e){return console.error("Error verifying EIP-1271 signature",e),!1}}e.i(970323);var T=e.i(570858),C=e.i(405030),S=e.i(817908),k=e.i(783308),P=e.i(811920);async function D({accountContract:e,factoryContract:a,options:n,message:i}){let s,o,c,d=(o="string"==typeof i?(0,C.stringToBytes)(i):i.raw instanceof Uint8Array?i.raw:(0,C.toBytes)(i.raw),c=(0,C.stringToBytes)(`\x19Ethereum Signed Message:
${o.length}`),(0,S.keccak256)(A.concat(c,o),void 0)),b=(0,t.encodeAbiParameters)([{type:"bytes32"}],[d]);if(s=await n.personalAccount.signTypedData({domain:{chainId:n.chain.id,name:"Account",verifyingContract:e.address,version:"1"},message:{message:b},primaryType:"AccountMessage",types:{AccountMessage:[{name:"message",type:"bytes"}]}}),await (0,w.isContractDeployed)(e)){if(await E({contract:e,hash:d,signature:s}))return s;throw Error("Failed to verify signature")}{let e=(0,P.prepareCreateAccount)({accountSalt:n.overrides?.accountSalt,adminAddress:n.personalAccount.address,createAccountOverride:n.overrides?.createAccount,factoryContract:a});if(!e)throw Error("Create account override not provided");let t=await (0,T.encode)(e);return r({address:a.address,data:t,signature:s})}}async function B({accountContract:e,factoryContract:a,options:n,typedData:i}){let s;if(i.domain?.verifyingContract?.toLowerCase()===e.address?.toLowerCase())return n.personalAccount.signTypedData(i);let o=function(e){let{domain:a={},message:r,primaryType:n}=e,i={EIP712Domain:k.extractEip712DomainTypes(a),...e.types};k.validate({domain:a,message:r,primaryType:n,types:i});let s=["0x1901"];if(a&&s.push(k.hashDomain({domain:a,types:i})),"EIP712Domain"!==n){let e,a=(e=function e({data:a,primaryType:r,types:n}){let i=[{type:"bytes32"}],s=[function({primaryType:e,types:t}){let a=(0,x.toHex)(function({primaryType:e,types:t}){let a="",r=function e({primaryType:t,types:a},r=new Set){let n=t.match(/^\w*/u),i=n?.[0];if(r.has(i)||void 0===a[i])return r;for(let t of(r.add(i),a[i]))e({primaryType:t.type,types:a},r);return r}({primaryType:e,types:t});for(let n of(r.delete(e),[e,...Array.from(r).sort()])){if(!t[n])throw Error("Invalid types");a+=`${n}(${t[n].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`}return a}({primaryType:e,types:t}));return(0,S.keccak256)(a)}({primaryType:r,types:n})];if(!n[r])throw Error("Invalid types");for(let o of n[r]){let[r,c]=function a({types:r,name:n,type:i,value:s}){if(void 0!==r[i])return[{type:"bytes32"},(0,S.keccak256)(e({data:s,primaryType:i,types:r}))];if("bytes"===i){let e=s.length%2?"0":"";return s=`0x${e+s.slice(2)}`,[{type:"bytes32"},(0,S.keccak256)(s)]}if("string"===i)return[{type:"bytes32"},(0,S.keccak256)((0,x.toHex)(s))];if(i.lastIndexOf("]")===i.length-1){let e=i.slice(0,i.lastIndexOf("[")),o=s.map(t=>a({name:n,type:e,types:r,value:t}));return[{type:"bytes32"},(0,S.keccak256)((0,t.encodeAbiParameters)(o.map(([e])=>e),o.map(([,e])=>e)))]}return[{type:i},s]}({name:o.name,type:o.type,types:n,value:a[o.name]});i.push(r),s.push(c)}return(0,t.encodeAbiParameters)(i,s)}({data:r,primaryType:n,types:i}),(0,S.keccak256)(e));s.push(a)}return(0,S.keccak256)(A.concat(...s.map(e=>A.fromHex(e))))}(i),c=(0,t.encodeAbiParameters)([{type:"bytes32"}],[o]);if(s=await n.personalAccount.signTypedData({domain:{chainId:n.chain.id,name:"Account",verifyingContract:e.address,version:"1"},message:{message:c},primaryType:"AccountMessage",types:{AccountMessage:[{name:"message",type:"bytes"}]}}),await (0,w.isContractDeployed)(e)){if(await E({contract:e,hash:o,signature:s}))return s;throw Error("Failed to verify signature")}{let e=(0,P.prepareCreateAccount)({accountSalt:n.overrides?.accountSalt,adminAddress:n.personalAccount.address,createAccountOverride:n.overrides?.createAccount,factoryContract:a});if(!e)throw Error("Create account override not provided");let t=await (0,T.encode)(e);return r({address:a.address,data:t,signature:s})}}async function I(t){let{accountContract:a}=t,r=Date.now(),{isContractDeployed:n}=await e.A(28575),i=await n(a);for(;!i;){if(Date.now()-r>6e4)throw Error("Timeout: Smart account deployment not confirmed after 1 minute");await new Promise(e=>setTimeout(e,500)),i=await n(a)}}async function H(t){let{chain:a,client:r,smartAccount:n,accountContract:i}=t;if(await (0,w.isContractDeployed)(i))return;let[{sendTransaction:s},{prepareTransaction:o}]=await Promise.all([e.A(94664),e.A(321068)]),c=o({chain:a,client:r,gas:50000n,to:i.address,value:0n}),d=await s({account:n,transaction:c});return await I({accountContract:i}),d}e.s(["confirmContractDeployment",()=>I,"deploySmartAccount",()=>H,"smartAccountSignMessage",()=>D,"smartAccountSignTypedData",()=>B],168125)},28575,e=>{e.v(e=>Promise.resolve().then(()=>e(16744)))},94664,e=>{e.v(e=>Promise.resolve().then(()=>e(825339)))},321068,e=>{e.v(e=>Promise.resolve().then(()=>e(630962)))}]);