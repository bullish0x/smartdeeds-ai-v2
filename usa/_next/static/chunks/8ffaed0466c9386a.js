(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,584969,225498,359332,e=>{"use strict";var t=e.i(987709);function a(e){let{logs:a,events:r,strict:i}=e;return(0,t.parseEventLogs)({abi:r.map(e=>e.abiEvent),logs:a,strict:i})}e.s(["parseEventLogs",()=>a],584969);var r=e.i(128725),i=e.i(521054),s=e.i(429856);function n(e){let t,{signature:a}=e;return{abiEvent:t=a&&"object"==typeof a&&"type"in a&&"event"===a.type?a:(0,r.parseAbiItem)(a),hash:(0,s.toEventHash)(t),topics:(0,i.encodeEventTopics)({abi:[t],args:e.filters})}}function o(e={}){return n({filters:e,signature:"event UserOperationRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)"})}function c(e={}){return n({filters:e,signature:"event PostOpRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)"})}e.s(["userOperationRevertReasonEvent",()=>o],225498),e.s(["postOpRevertReasonEvent",()=>c],359332)},961786,408898,285532,e=>{"use strict";var t=e.i(181213),a=e.i(910570);function r(r){return(0,a.approve)({asyncParams:async()=>{let a;if("amount"in r){let{decimals:i}=await e.A(138237),s=await i(r).catch(()=>18);a=(0,t.toUnits)(r.amount.toString(),s)}else a=r.amountWei;return{overrides:{erc20Value:{amountWei:a,tokenAddress:r.contract.address},...r.overrides},spender:r.spender,value:a}},contract:r.contract})}e.s(["approve",()=>r],961786);var i=e.i(628040),s=e.i(16744);e.i(392798);var n=e.i(257606);e.i(610409),e.i(362729);let o=[{name:"signer",type:"address"}],c=[{components:[{name:"signer",type:"address"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"startTimestamp",type:"uint128"},{name:"endTimestamp",type:"uint128"}],name:"permissions",type:"tuple"}];async function d(e){return(0,n.readContract)({contract:e.contract,method:["0xf15d424e",o,c],params:[e.signer]})}var p=e.i(209847),l=e.i(185562);let m=[{components:[{name:"signer",type:"address"},{name:"isAdmin",type:"uint8"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"permissionStartTimestamp",type:"uint128"},{name:"permissionEndTimestamp",type:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],name:"req",type:"tuple"},{name:"signature",type:"bytes"}],u=[];var y=e.i(646469);function v(){return new Date(Date.now()+31536e7)}function f(e){return(0,y.toBigInt)(Math.floor(e.getTime()/1e3))}var g=e.i(483726);let h=[{name:"signer",type:"address"},{name:"isAdmin",type:"uint8"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"permissionStartTimestamp",type:"uint128"},{name:"permissionEndTimestamp",type:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}];async function G(e){let{account:t,contract:a,req:r}=e,i=await t.signTypedData({domain:{chainId:a.chain.id,name:"Account",verifyingContract:a.address,version:"1"},message:r,primaryType:"SignerPermissionRequest",types:{SignerPermissionRequest:h}});return{req:r,signature:i}}async function w(e){let{target:a,permissions:r}=e;return{approvedTargets:"*"===r.approvedTargets?[i.ZERO_ADDRESS]:r.approvedTargets,isAdmin:0,nativeTokenLimitPerTransaction:(0,t.toWei)(r.nativeTokenLimitPerTransaction?.toString()||"0"),permissionEndTimestamp:f(r.permissionEndTimestamp||v()),permissionStartTimestamp:f(r.permissionStartTimestamp||new Date(0)),reqValidityEndTimestamp:f(v()),reqValidityStartTimestamp:0n,signer:a,uid:await (0,g.randomBytesHex)()}}function A(e){var t;let a,{contract:r,sessionKeyAddress:i,account:s,permissions:n}=e;return t={async asyncParams(){let{req:e,signature:t}=await G({account:s,contract:r,req:await w({permissions:n,target:i})});return{req:e,signature:t}},contract:r},a=(0,l.once)(async()=>"asyncParams"in t?await t.asyncParams():t),(0,p.prepareContractCall)({accessList:async()=>(await a()).overrides?.accessList,authorizationList:async()=>(await a()).overrides?.authorizationList,contract:t.contract,erc20Value:async()=>(await a()).overrides?.erc20Value,extraGas:async()=>(await a()).overrides?.extraGas,gas:async()=>(await a()).overrides?.gas,gasPrice:async()=>(await a()).overrides?.gasPrice,maxFeePerGas:async()=>(await a()).overrides?.maxFeePerGas,maxPriorityFeePerGas:async()=>(await a()).overrides?.maxPriorityFeePerGas,method:["0x5892e236",m,u],nonce:async()=>(await a()).overrides?.nonce,params:async()=>{let e=await a();return[e.req,e.signature]},value:async()=>(await a()).overrides?.value})}async function T(e){var a,r;let{accountContract:n,sessionKeyAddress:o,newPermissions:c}=e;if(!await (0,s.isContractDeployed)(n))return!0;let p=await d({contract:n,signer:o});return!!(p.endTimestamp&&p.endTimestamp<Math.floor(Date.now()/1e3)||(a=p.approvedTargets,!("*"===(r=c.approvedTargets)&&1===a.length&&a[0]===i.ZERO_ADDRESS||"*"!==r&&r.map(e=>e.toLowerCase()).every(e=>a.map(e=>e.toLowerCase()).includes(e))))||(0,t.toWei)(c.nativeTokenLimitPerTransaction?.toString()??"0")>p.nativeTokenLimitPerTransaction)}e.s(["addSessionKey",()=>A,"shouldUpdateSessionKey",()=>T],408898),e.s(["maxUint96",0,2n**96n-1n],285532)},592905,713679,e=>{"use strict";e.s(["clearAccountDeploying",()=>k,"createUnsignedUserOp",()=>N,"prepareUserOp",()=>Y,"signUserOp",()=>q,"waitForUserOpReceipt",()=>H],592905);var t=e.i(832236),a=e.i(756605),r=e.i(277096);e.i(392798);var i=e.i(257606),s=e.i(610409);e.i(362729);let n=[{name:"sender",type:"address"},{name:"key",type:"uint192"}],o=[{name:"nonce",type:"uint256"}];async function c(e){return(0,i.readContract)({contract:e.contract,method:["0x35567e1a",n,o],params:[e.sender,e.key]})}let d=[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],p=[{type:"bytes32"}];async function l(e){return(0,i.readContract)({contract:e.contract,method:["0xa6193531",d,p],params:[e.userOp]})}let m=[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],u=[{type:"bytes32"}];async function y(e){return(0,i.readContract)({contract:e.contract,method:["0x22cdde4c",m,u],params:[e.userOp]})}var v=e.i(531269),f=e.i(570858),g=e.i(176681),h=e.i(16744),G=e.i(966312),w=e.i(405030),A=e.i(18161),T=e.i(817908),O=e.i(187731),P=e.i(966710);e.i(997368);var x=e.i(508243),L=e.i(811920),D=e.i(248602),I=e.i(52007),E=e.i(193081),b=e.i(970323);let C=()=>{let e=BigInt(Math.floor(0x100000000*Math.random())),t=BigInt(Math.floor(0x100000000*Math.random())),a=BigInt(Math.floor(0x100000000*Math.random())),r=BigInt(Math.floor(0x100000000*Math.random())),i=BigInt(Math.floor(0x100000000*Math.random())),s=BigInt(Math.floor(0x100000000*Math.random()));return e<<BigInt(160)|t<<BigInt(128)|a<<BigInt(96)|r<<BigInt(64)|i<<BigInt(32)|s};function U(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,null==t||(0,b.isHex)(t)?t:(0,G.toHex)(t)]))}async function S(e){let{userOp:t,paymasterOverride:a,client:r,chain:i,entrypointAddress:s}=e;if(a)return a(t);let n=s??D.ENTRYPOINT_ADDRESS_v0_6,o=(0,D.getDefaultBundlerUrl)(i),c={id:1,jsonrpc:"2.0",method:"pm_sponsorUserOperation",params:[U(t),n]},d=(0,A.getClientFetch)(r),p=await d(o,{body:(0,O.stringify)(c),headers:{"Content-Type":"application/json"},method:"POST"});if(!p.ok){let e=await p.text()||p.statusText;throw Error(`Paymaster error: ${p.status} - ${e}`)}let l=await p.json();if(l.result)return"string"==typeof l.result?{paymasterAndData:l.result}:(l.result.reason&&console.warn(`Paymaster policy rejected this transaction with reason: ${l.result.reason} ${l.result.policyId?`(policyId: ${l.result.policyId})`:""}`),{callGasLimit:l.result.callGasLimit?(0,G.hexToBigInt)(l.result.callGasLimit):void 0,paymaster:l.result.paymaster,paymasterAndData:l.result.paymasterAndData,paymasterData:l.result.paymasterData,paymasterPostOpGasLimit:l.result.paymasterPostOpGasLimit?(0,G.hexToBigInt)(l.result.paymasterPostOpGasLimit):void 0,paymasterVerificationGasLimit:l.result.paymasterVerificationGasLimit?(0,G.hexToBigInt)(l.result.paymasterVerificationGasLimit):void 0,preVerificationGas:l.result.preVerificationGas?(0,G.hexToBigInt)(l.result.preVerificationGas):void 0,verificationGasLimit:l.result.verificationGasLimit?(0,G.hexToBigInt)(l.result.verificationGasLimit):void 0});let m=l.error?.message||l.error||p.statusText||"unknown error";throw Error(`Paymaster error from ${o}: ${m}`)}e.s(["generateRandomUint192",0,C,"hexlifyUserOp",()=>U],713679);let V=new Set,R=e=>`${e.chain.id}:${e.address}`,B=e=>{V.add(R(e))},k=e=>{V.delete(R(e))},_=e=>V.has(R(e));async function H(e){let t=e.timeoutMs||12e4,a=e.intervalMs||1e3,r=Date.now()+t;for(;Date.now()<r;){let t=await (0,x.getUserOpReceipt)(e);if(t)return t;await new Promise(e=>setTimeout(e,a))}throw Error(`Timeout waiting for userOp to be mined on chain ${e.chain.id} with UserOp hash: ${e.userOpHash}`)}async function N(e){let{transaction:t,accountContract:a,factoryContract:r,adminAddress:i,overrides:s,sponsorGas:n,waitForDeployment:o=!0,isDeployedOverride:c}=e,d=t.chain,p=t.client,l={bundlerUrl:s?.bundlerUrl,chain:d,client:p,entrypointAddress:s?.entrypointAddress},m=(0,D.getEntryPointVersion)(e.overrides?.entrypointAddress||D.ENTRYPOINT_ADDRESS_v0_6),[u,y,v,g,G]=await Promise.all(["boolean"==typeof c?c:(0,h.isContractDeployed)(a).then(e=>e||_(a)),(0,f.encode)(t),(0,P.resolvePromisedValue)(t.gas),F({bundlerOptions:l,chain:d,client:p,executeTx:t}),j({accountContract:a,chain:d,client:p,entrypointAddress:s?.entrypointAddress,getNonceOverride:s?.getAccountNonce})]),{maxFeePerGas:w,maxPriorityFeePerGas:A}=g;return"v0.7"===m?M({accountContract:a,adminAddress:i,bundlerOptions:l,callData:y,callGasLimit:v,factoryContract:r,isDeployed:u,maxFeePerGas:w,maxPriorityFeePerGas:A,nonce:G,overrides:s,sponsorGas:n,waitForDeployment:o}):$({accountContract:a,adminAddress:i,bundlerOptions:l,callData:y,callGasLimit:v,factoryContract:r,isDeployed:u,maxFeePerGas:w,maxPriorityFeePerGas:A,nonce:G,overrides:s,sponsorGas:n,waitForDeployment:o})}async function F(e){let{executeTx:t,bundlerOptions:a,chain:r,client:i}=e,{maxFeePerGas:s,maxPriorityFeePerGas:n}=t,o=a?.bundlerUrl??(0,D.getDefaultBundlerUrl)(r);if((0,A.isThirdwebUrl)(o)){let e=await (0,x.getUserOpGasFees)({options:a});s=e.maxFeePerGas,n=e.maxPriorityFeePerGas}else{let[e,t]=await Promise.all([(0,P.resolvePromisedValue)(s),(0,P.resolvePromisedValue)(n)]);if(e&&t)s=e,n=t;else{let a=await (0,v.getDefaultGasOverrides)(i,r);n=t??a.maxPriorityFeePerGas??0n,s=e??a.maxFeePerGas??0n}}return{maxFeePerGas:s,maxPriorityFeePerGas:n}}async function M(e){let a,r,{bundlerOptions:i,isDeployed:n,factoryContract:o,accountContract:c,adminAddress:d,sponsorGas:p,overrides:l,nonce:m,callData:u,callGasLimit:y,maxFeePerGas:v,maxPriorityFeePerGas:g,waitForDeployment:h}=e,{chain:w,client:A}=i;n?(r="0x",h&&await W(c)):(a=o.address,r=await (0,f.encode)((0,L.prepareCreateAccount)({accountSalt:l?.accountSalt,adminAddress:d,createAccountOverride:l?.createAccount,factoryContract:o})),h&&B(c));let O={callData:u,callGasLimit:y??0n,factory:a,factoryData:r,maxFeePerGas:v,maxPriorityFeePerGas:g,nonce:m,paymaster:void 0,paymasterData:"0x",paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n,preVerificationGas:0n,sender:c.address,signature:D.DUMMY_SIGNATURE,verificationGasLimit:0n};if(p){let e=await S({chain:w,client:A,entrypointAddress:l?.entrypointAddress,paymasterOverride:l?.paymaster,userOp:O});if(e.paymaster&&e.paymasterData&&(O.paymaster=e.paymaster,O.paymasterData=e.paymasterData),e.callGasLimit&&e.verificationGasLimit&&e.preVerificationGas&&e.paymasterPostOpGasLimit&&e.paymasterVerificationGasLimit)O.callGasLimit=e.callGasLimit,O.verificationGasLimit=e.verificationGasLimit,O.preVerificationGas=e.preVerificationGas,O.paymasterPostOpGasLimit=e.paymasterPostOpGasLimit,O.paymasterVerificationGasLimit=e.paymasterVerificationGasLimit;else{let e=l?.tokenPaymaster?{[l.tokenPaymaster.tokenAddress]:{stateDiff:{[(0,T.keccak256)((0,s.encodeAbiParameters)([{type:"address"},{type:"uint256"}],[c.address,l.tokenPaymaster.balanceStorageSlot]))]:(0,G.toHex)(t.maxUint96,{size:32})}}}:void 0,a=await (0,x.estimateUserOpGas)({options:i,userOp:O},e);O.callGasLimit=a.callGasLimit,O.verificationGasLimit=a.verificationGasLimit,O.preVerificationGas=a.preVerificationGas,O.paymasterPostOpGasLimit=l?.tokenPaymaster?500000n:a.paymasterPostOpGasLimit||0n,O.paymasterVerificationGasLimit=a.paymasterVerificationGasLimit||0n;let r=await S({chain:w,client:A,entrypointAddress:l?.entrypointAddress,paymasterOverride:l?.paymaster,userOp:O});r.paymaster&&r.paymasterData&&(O.paymaster=r.paymaster,O.paymasterData=r.paymasterData)}}else{let e=await (0,x.estimateUserOpGas)({options:i,userOp:O});O.callGasLimit=e.callGasLimit,O.verificationGasLimit=e.verificationGasLimit,O.preVerificationGas=e.preVerificationGas,O.paymasterPostOpGasLimit=e.paymasterPostOpGasLimit||0n,O.paymasterVerificationGasLimit=e.paymasterVerificationGasLimit||0n}return{...O,signature:"0x"}}async function $(e){let t,{bundlerOptions:a,isDeployed:r,factoryContract:i,accountContract:s,adminAddress:n,sponsorGas:o,overrides:c,nonce:d,callData:p,callGasLimit:l,maxFeePerGas:m,maxPriorityFeePerGas:u,waitForDeployment:y}=e,{chain:v,client:f}=a;r?(t="0x",y&&await W(s)):(t=await K({accountSalt:c?.accountSalt,adminAddress:n,createAccountOverride:c?.createAccount,factoryContract:i}),y&&B(s));let g={callData:p,callGasLimit:l??0n,initCode:t,maxFeePerGas:m,maxPriorityFeePerGas:u,nonce:d,paymasterAndData:"0x",preVerificationGas:0n,sender:s.address,signature:D.DUMMY_SIGNATURE,verificationGasLimit:0n};if(o){let e=await S({chain:v,client:f,entrypointAddress:c?.entrypointAddress,paymasterOverride:c?.paymaster,userOp:g}),t="paymasterAndData"in e?e.paymasterAndData:"0x";if(t&&"0x"!==t&&(g.paymasterAndData=t),e.callGasLimit&&e.verificationGasLimit&&e.preVerificationGas)g.callGasLimit=e.callGasLimit,g.verificationGasLimit=e.verificationGasLimit,g.preVerificationGas=e.preVerificationGas;else{let e=await (0,x.estimateUserOpGas)({options:a,userOp:g});if(g.callGasLimit=e.callGasLimit,g.verificationGasLimit=e.verificationGasLimit,g.preVerificationGas=e.preVerificationGas,t&&"0x"!==t){let e=await S({chain:v,client:f,entrypointAddress:c?.entrypointAddress,paymasterOverride:c?.paymaster,userOp:g}),t="paymasterAndData"in e?e.paymasterAndData:"0x";t&&"0x"!==t&&(g.paymasterAndData=t)}}}else{let e=await (0,x.estimateUserOpGas)({options:a,userOp:g});g.callGasLimit=e.callGasLimit,g.verificationGasLimit=e.verificationGasLimit,g.preVerificationGas=e.preVerificationGas}return{...g,signature:"0x"}}async function q(e){let{userOp:t,chain:a,entrypointAddress:r,adminAccount:i}=e,s=await z({chain:a,client:e.client,entrypointAddress:r,userOp:t});if(i.signMessage){let e=await i.signMessage({chainId:a.id,message:{raw:(0,w.hexToBytes)(s)},originalMessage:(0,O.stringify)(t)});return{...t,signature:e}}throw Error("signMessage not implemented in signingAccount")}async function z(e){let t,{userOp:i,chain:s,entrypointAddress:n}=e;if("v0.7"===(0,D.getEntryPointVersion)(n||D.ENTRYPOINT_ADDRESS_v0_6)){let o={accountGasLimits:(0,a.concat)([(0,I.pad)((0,E.toHex)(BigInt(i.verificationGasLimit)),{size:16}),(0,I.pad)((0,E.toHex)(BigInt(i.callGasLimit)),{size:16})]),callData:i.callData,gasFees:(0,a.concat)([(0,I.pad)((0,E.toHex)(BigInt(i.maxPriorityFeePerGas)),{size:16}),(0,I.pad)((0,E.toHex)(BigInt(i.maxFeePerGas)),{size:16})]),initCode:i.factory?(0,a.concat)([i.factory,i.factoryData||"0x"]):"0x",nonce:BigInt(i.nonce),paymasterAndData:i.paymaster?(0,a.concat)([i.paymaster,(0,I.pad)((0,E.toHex)(BigInt(i.paymasterVerificationGasLimit||0)),{size:16}),(0,I.pad)((0,E.toHex)(BigInt(i.paymasterPostOpGasLimit||0)),{size:16}),i.paymasterData||"0x"]):"0x",preVerificationGas:BigInt(i.preVerificationGas),sender:i.sender,signature:i.signature};t=await y({contract:(0,r.getContract)({address:n||D.ENTRYPOINT_ADDRESS_v0_7,chain:s,client:e.client}),userOp:o})}else t=await l({contract:(0,r.getContract)({address:n||D.ENTRYPOINT_ADDRESS_v0_6,chain:s,client:e.client}),userOp:i});return t}async function K(e){let{factoryContract:t,adminAddress:r,accountSalt:i,createAccountOverride:s}=e,n=(0,L.prepareCreateAccount)({accountSalt:i,adminAddress:r,createAccountOverride:s,factoryContract:t});return(0,a.concat)([t.address,await (0,f.encode)(n)])}async function j(e){let{accountContract:t,chain:a,client:i,entrypointAddress:s,getNonceOverride:n}=e;return n?n(t):await c({contract:(0,r.getContract)({address:s||D.ENTRYPOINT_ADDRESS_v0_6,chain:a,client:i}),key:C(),sender:t.address})}async function Y(e){let t,a=e.smartWalletOptions,i=(0,r.getContract)({address:a.factoryAddress||(0,D.getDefaultAccountFactory)(a.overrides?.entrypointAddress),chain:a.chain,client:e.client}),s=await (0,L.predictAddress)({accountAddress:a.overrides?.accountAddress,accountSalt:a.overrides?.accountSalt,adminAddress:e.adminAccount.address,factoryContract:i,predictAddressOverride:a.overrides?.predictAddress}),n=(0,r.getContract)({address:s,chain:a.chain,client:e.client});if(1===e.transactions.length){let r=e.transactions[0],i=await (0,g.toSerializableTransaction)({from:s,transaction:r});t=(0,L.prepareExecute)({accountContract:n,executeOverride:a.overrides?.execute,transaction:i})}else{let r=await Promise.all(e.transactions.map(async e=>{let[t,a,r]=await Promise.all([(0,f.encode)(e),(0,P.resolvePromisedValue)(e.to),(0,P.resolvePromisedValue)(e.value)]);return{chainId:e.chain.id,data:t,to:a,value:r}}));t=(0,L.prepareBatchExecute)({accountContract:n,executeBatchOverride:a.overrides?.executeBatch,transactions:r})}return N({accountContract:n,adminAddress:e.adminAccount.address,factoryContract:i,isDeployedOverride:e.isDeployedOverride,overrides:a.overrides,sponsorGas:"sponsorGas"in a?a.sponsorGas:a.gasless,transaction:t,waitForDeployment:e.waitForDeployment})}async function W(e){let t=Date.now();for(;_(e);){if(Date.now()-t>6e4)throw k(e),Error("Account deployment is taking too long (over 1 minute). Please try again.");await new Promise(e=>setTimeout(e,500))}}},997368,e=>{"use strict";e.s(["connectSmartAccount",()=>O,"disconnectSmartAccount",()=>P,"getEntrypointFromFactory",()=>I]);var t=e.i(249228),a=e.i(850971),r=e.i(997918),i=e.i(277096),s=e.i(664505),n=e.i(961786),o=e.i(408898),c=e.i(825339),d=e.i(176681),p=e.i(102594),l=e.i(257606),m=e.i(305400),u=e.i(247557),y=e.i(966710),v=e.i(825259),f=e.i(285532),g=e.i(508243),h=e.i(811920),G=e.i(248602),w=e.i(592905);let A=new WeakMap,T=new WeakMap;async function O(t,s){let{personalAccount:n,client:d}=t;if(!n)throw Error("No personal account provided for smart account connection");let l=s.chain,y="gasless"in s?s.gasless:s.sponsorGas;if(await (0,u.isZkSyncChain)(l))return[function(t){let{creationOptions:i,connectionOptions:s,chain:n}=t,o={address:(0,m.getAddress)(s.personalAccount.address),onTransactionRequested:async e=>s.personalAccount.onTransactionRequested?.(e),async sendTransaction(e){let c={chain:(0,r.getCachedChain)(e.chainId),client:s.client,data:e.data,eip712:e.eip712,to:e.to??void 0,value:e.value??0n},d=await (0,p.populateEip712Transaction)({account:o,transaction:c});if(t.sponsorGas&&!d.paymaster){let e=await (0,g.getZkPaymasterData)({options:{bundlerUrl:i.overrides?.bundlerUrl,chain:n,client:s.client,entrypointAddress:i.overrides?.entrypointAddress},transaction:d});d={...d,...e}}let l=await (0,p.signEip712Transaction)({account:o,chainId:n.id,eip712Transaction:d}),m=await (0,g.broadcastZkTransaction)({options:{bundlerUrl:i.overrides?.bundlerUrl,chain:n,client:s.client,entrypointAddress:i.overrides?.entrypointAddress},signedTransaction:l,transaction:d});return(0,a.trackTransaction)({chainId:n.id,client:s.client,contractAddress:e.to??void 0,transactionHash:m.transactionHash,walletAddress:o.address,walletType:"smart"}),{chain:n,client:s.client,transactionHash:m.transactionHash}},signMessage:async({message:e})=>s.personalAccount.signMessage({message:e}),async signTypedData(e){let t=(0,v.parseTypedData)(e);return s.personalAccount.signTypedData(t)},sendCalls:async t=>{let{inAppWalletSendCalls:a}=await e.A(544744),r=t.calls[0];if(!r)throw Error("No calls to send");let i=r.client,s=r.chain||t.chain,n=await a({account:o,calls:t.calls,chain:s});return{chain:s,client:i,id:n}},getCallsStatus:async t=>{let{inAppWalletGetCallsStatus:a}=await e.A(544744);return a(t)},getCapabilities:async e=>({[e.chainId??1]:{atomic:{status:"unsupported"},paymasterService:{supported:t.sponsorGas??!1}}})};return o}({chain:l,connectionOptions:t,creationOptions:s,sponsorGas:y}),l];if(s.factoryAddress&&!s.overrides?.entrypointAddress){let e=await I(s.factoryAddress,d,l);e&&(s.overrides={...s.overrides,entrypointAddress:e})}s.overrides?.tokenPaymaster&&!s.overrides?.entrypointAddress&&(s.overrides={...s.overrides,entrypointAddress:G.ENTRYPOINT_ADDRESS_v0_7});let f=s.factoryAddress??(0,G.getDefaultAccountFactory)(s.overrides?.entrypointAddress),w=(0,i.getContract)({address:f,chain:l,client:d}),O=await (0,h.predictAddress)({accountAddress:s.overrides?.accountAddress,accountSalt:s.overrides?.accountSalt,adminAddress:n.address,factoryContract:w,predictAddressOverride:s.overrides?.predictAddress}).then(e=>e).catch(e=>{throw Error(`Failed to get account address with factory contract ${w.address} on chain ID ${l.id}: ${e?.message||"unknown error"}`,{cause:e})}),P=(0,i.getContract)({address:O,chain:l,client:d}),L=await x({...s,accountContract:P,chain:l,client:d,factoryContract:w,personalAccount:n,sponsorGas:y});if(A.set(n,L),T.set(L,n),s.sessionKey&&await (0,o.shouldUpdateSessionKey)({accountContract:P,newPermissions:s.sessionKey.permissions,sessionKeyAddress:s.sessionKey.address})){let e=(0,o.addSessionKey)({account:n,contract:P,permissions:s.sessionKey.permissions,sessionKeyAddress:s.sessionKey.address});await (0,c.sendTransaction)({account:L,transaction:e})}return[L,l]}async function P(e){let t=T.get(e);t&&(A.delete(t),T.delete(e))}async function x(t){let s=t.overrides?.tokenPaymaster;if(s&&"v0.7"!==(0,G.getEntryPointVersion)(t.overrides?.entrypointAddress||G.ENTRYPOINT_ADDRESS_v0_6))throw Error("Token paymaster is only supported for entrypoint version v0.7");let n=t.sponsorGas,o=t.accountContract,c={address:(0,m.getAddress)(o.address),onTransactionRequested:async e=>t.personalAccount.onTransactionRequested?.(e),async sendBatchTransaction(e){let i=(0,h.prepareBatchExecute)({accountContract:o,executeBatchOverride:t.overrides?.executeBatch,transactions:e});if(0===e.length)throw Error("No transactions to send");let s=e[0];if(!s)throw Error("No transactions to send");let n=(0,r.getCachedChain)(s.chainId),c=await D({executeTx:i,options:{...t,accountContract:o,chain:n}});return(0,a.trackTransaction)({chainId:n.id,client:t.client,contractAddress:e[0]?.to??void 0,transactionHash:c.transactionHash,walletAddress:t.accountContract.address,walletType:"smart"}),c},async sendTransaction(e){let n;if(s){await L({accountContract:o,erc20Paymaster:s,options:t});let e=async()=>({paymaster:s.paymasterAddress,paymasterData:"0x"});n=t.overrides?.paymaster||e}else n=t.overrides?.paymaster;e.chainId!==o.chain.id&&(o=(0,i.getContract)({address:c.address,chain:(0,r.getCachedChain)(e.chainId),client:t.client}));let d=(0,h.prepareExecute)({accountContract:o,executeOverride:t.overrides?.execute,transaction:e}),p=(0,r.getCachedChain)(e.chainId),l=await D({executeTx:d,options:{...t,accountContract:o,chain:p,overrides:{...t.overrides,paymaster:n}}});return(0,a.trackTransaction)({chainId:p.id,client:t.client,contractAddress:e.to??void 0,transactionHash:l.transactionHash,walletAddress:t.accountContract.address,walletType:"smart"}),l},async signMessage({message:a}){if(t.overrides?.signMessage)return t.overrides.signMessage({accountContract:o,adminAccount:t.personalAccount,factoryContract:t.factoryContract,message:a});let{smartAccountSignMessage:r}=await e.A(293689);return r({accountContract:o,factoryContract:t.factoryContract,message:a,options:t})},async signTypedData(a){if(t.overrides?.signTypedData)return t.overrides.signTypedData({accountContract:o,adminAccount:t.personalAccount,factoryContract:t.factoryContract,typedData:a});let{smartAccountSignTypedData:r}=await e.A(293689);return r({accountContract:o,factoryContract:t.factoryContract,options:t,typedData:a})},sendCalls:async t=>{let{inAppWalletSendCalls:a}=await e.A(544744),r=t.calls[0];if(!r)throw Error("No calls to send");let i=r.client,s=r.chain||t.chain,n=await a({account:c,calls:t.calls,chain:s});return{chain:s,client:i,id:n}},getCallsStatus:async t=>{let{inAppWalletGetCallsStatus:a}=await e.A(544744);return a(t)},getCapabilities:async e=>({[e.chainId??1]:{atomic:{status:"supported"},paymasterService:{supported:n??!1}}})};return c}async function L(e){let{accountContract:t,erc20Paymaster:a,options:r}=e,o=a.tokenAddress,c=(0,i.getContract)({address:o,chain:t.chain,client:t.client});if(await (0,s.allowance)({contract:c,owner:t.address,spender:a.paymasterAddress})>0n)return;let p=(0,n.approve)({amountWei:f.maxUint96-1n,contract:c,spender:a.paymasterAddress}),l=await (0,d.toSerializableTransaction)({from:t.address,transaction:p}),m=(0,h.prepareExecute)({accountContract:t,executeOverride:r.overrides?.execute,transaction:l});await D({executeTx:m,options:{...r,overrides:{...r.overrides,tokenPaymaster:void 0}}})}async function D(e){let{executeTx:r,options:i}=e;try{let e=await (0,w.createUnsignedUserOp)({accountContract:i.accountContract,adminAddress:i.personalAccount.address,factoryContract:i.factoryContract,overrides:i.overrides,sponsorGas:i.sponsorGas,transaction:r}),t=await (0,w.signUserOp)({adminAccount:i.personalAccount,chain:i.chain,client:i.client,entrypointAddress:i.overrides?.entrypointAddress,userOp:e}),s={bundlerUrl:i.overrides?.bundlerUrl,chain:i.chain,client:i.client,entrypointAddress:i.overrides?.entrypointAddress},n=await (0,g.bundleUserOp)({options:s,userOp:t}),o=await (0,w.waitForUserOpReceipt)({...s,userOpHash:n});return(0,a.trackTransaction)({chainId:i.chain.id,client:i.client,contractAddress:await (0,y.resolvePromisedValue)(r.to??void 0),transactionHash:o.transactionHash,walletAddress:i.accountContract.address,walletType:"smart"}),{chain:i.chain,client:i.client,transactionHash:o.transactionHash}}catch(e){throw(0,t.isInsufficientFundsError)(e)&&(0,a.trackInsufficientFundsError)({chainId:i.chain.id,client:i.client,contractAddress:await (0,y.resolvePromisedValue)(r.to??void 0),error:e,transactionValue:await (0,y.resolvePromisedValue)(r.value),walletAddress:i.accountContract.address}),e}finally{(0,w.clearAccountDeploying)(i.accountContract)}}async function I(e,t,a){let r=(0,i.getContract)({address:e,chain:a,client:t});try{return await (0,l.readContract)({contract:r,method:"function entrypoint() public view returns (address)"})}catch{return}}},55968,e=>{"use strict";function t(e){let{receipt:t}=e,a={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs,status:t.status,to:t.to?t.to:null,transactionHash:t.transactionHash,transactionIndex:t.transactionIndex,type:t.type};return t.blobGasPrice&&(a.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(a.blobGasUsed=BigInt(t.blobGasUsed)),{...e,actualGasCost:BigInt(e.actualGasCost),actualGasUsed:BigInt(e.actualGasUsed),nonce:BigInt(e.nonce),receipt:a,userOpHash:e.userOpHash}}e.s(["formatUserOperationReceipt",()=>t])},508243,e=>{"use strict";e.s(["broadcastZkTransaction",()=>G,"bundleUserOp",()=>l,"estimateUserOpGas",()=>m,"executeWithSignature",()=>g,"getQueuedTransactionHash",()=>h,"getUserOpGasFees",()=>u,"getUserOpReceipt",()=>y,"getZkPaymasterData",()=>f]);var t=e.i(30426);e.i(277096);var a=e.i(584969),r=e.i(225498),i=e.i(359332);e.i(16744);var s=e.i(966312),n=e.i(18161),o=e.i(187731);e.i(181213),e.i(997368);var c=e.i(55968);e.i(811920);var d=e.i(248602);e.i(592905);var p=e.i(713679);async function l(e){return w({...e,operation:"eth_sendUserOperation",params:[(0,p.hexlifyUserOp)(e.userOp),e.options.entrypointAddress??d.ENTRYPOINT_ADDRESS_v0_6]})}async function m(e,t){let a=await w({...e,operation:"eth_estimateUserOperationGas",params:[(0,p.hexlifyUserOp)(e.userOp),e.options.entrypointAddress??d.ENTRYPOINT_ADDRESS_v0_6,t??{}]});return{callGasLimit:(0,s.hexToBigInt)(a.callGasLimit)+d.MANAGED_ACCOUNT_GAS_BUFFER,paymasterPostOpGasLimit:void 0!==a.paymasterPostOpGasLimit?(0,s.hexToBigInt)(a.paymasterPostOpGasLimit):void 0,paymasterVerificationGasLimit:void 0!==a.paymasterVerificationGasLimit?(0,s.hexToBigInt)(a.paymasterVerificationGasLimit):void 0,preVerificationGas:(0,s.hexToBigInt)(a.preVerificationGas),verificationGas:void 0!==a.verificationGas?(0,s.hexToBigInt)(a.verificationGas):void 0,verificationGasLimit:(0,s.hexToBigInt)(a.verificationGasLimit)}}async function u(e){let t=await w({...e,operation:"thirdweb_getUserOperationGasPrice",params:[]});return{maxFeePerGas:(0,s.hexToBigInt)(t.maxFeePerGas),maxPriorityFeePerGas:(0,s.hexToBigInt)(t.maxPriorityFeePerGas)}}async function y(e){let s=await v(e);if(s){if(!1===s.success){let e=(0,a.parseEventLogs)({events:[(0,r.userOperationRevertReasonEvent)(),(0,i.postOpRevertReasonEvent)()],logs:s.logs}),n=e[0]?.args?.revertReason;if(!n)throw Error(`UserOp failed at txHash: ${s.receipt.transactionHash}`);let o=(0,t.decodeErrorResult)({data:n});throw Error(`UserOp failed with reason: '${o.args.join(",")}' at txHash: ${s.receipt.transactionHash}`)}return s.receipt}}async function v(e){let t=await w({operation:"eth_getUserOperationReceipt",options:e,params:[e.userOpHash]});if(t)return(0,c.formatUserOperationReceipt)(t)}async function f(e){let t=await w({operation:"zk_paymasterData",options:e.options,params:[e.transaction]});return{paymaster:t.paymaster,paymasterInput:t.paymasterInput}}async function g(e){let t=await w({...e,operation:"tw_execute",params:[e.eoaAddress,e.wrappedCalls,e.signature,e.authorization]});if(!t.queueId)throw Error(`Error executing 7702 transaction: ${(0,o.stringify)(t)}`);return{transactionId:t.queueId}}async function h(e){return{transactionHash:(await w({...e,operation:"tw_getTransactionHash",params:[e.transactionId]})).transactionHash}}async function G(e){return{transactionHash:(await w({operation:"zk_broadcastTransaction",options:e.options,params:[{...e.transaction,signedTransaction:e.signedTransaction}]})).transactionHash}}async function w(e){let{options:t,operation:a,params:r}=e,i=t.bundlerUrl??(0,d.getDefaultBundlerUrl)(t.chain),s=(0,n.getClientFetch)(t.client),c=await s(i,{useAuthToken:!0,body:(0,o.stringify)({id:1,jsonrpc:"2.0",method:a,params:r}),headers:{"Content-Type":"application/json"},method:"POST"}),p=await c.json();if(!c.ok||p.error){let e=p.error||c.statusText;"object"==typeof e&&(e=(0,o.stringify)(e));let t=p.code||"UNKNOWN";throw Error(`${a} error: ${e}
Status: ${c.status}
Code: ${t}`)}return p.result}}]);