# Apache configuration for Next.js static export with base path
# This ensures all routes are handled by the client-side router

# Disable directory listings and set index.html as directory index
Options -Indexes
DirectoryIndex index.html

<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # PRIORITY 1: If accessing a path and a corresponding .html file exists, serve it
  # This handles cases where both a directory and .html file exist (e.g., /intl/terms/ and /intl/terms.html)
  # Check without trailing slash first
  RewriteCond %{REQUEST_URI} !/$
  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI}.html -f
  RewriteRule ^(.+)$ $1.html [L]
  
  # Check with trailing slash (but not for root /intl/ itself)
  RewriteCond %{REQUEST_URI} ^(.+)/$
  RewriteCond %{REQUEST_URI} !^/?$
  RewriteCond %{DOCUMENT_ROOT}%1.html -f
  RewriteRule ^(.+)/$ $1.html [L]
  
  # PRIORITY 2: If the requested file exists, serve it
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteRule ^ - [L]
  
  # PRIORITY 3: For all other routes that don't exist as files, serve index.html
  # This allows Next.js client-side routing to handle the route
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.html [L]
</IfModule>

# Optional: Set proper MIME types
<IfModule mod_mime.c>
  AddType text/html .html
  AddType application/javascript .js
  AddType text/css .css
</IfModule>

# Enable compression
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

